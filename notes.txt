if Credits then Credits.Visible = false end
if Logo then Logo.Visible = false end

local replaceCmd = function(cmdToReplace, newName, newAlias, newFunc)
	cmdtoReplace = tostring(cmdToReplace)
	if type(newFunc) == "function" then
		for i = #cmds,1,-1 do
			if cmds[i].NAME == cmdToReplace or FindInTable(cmds[i].ALIAS, cmdToReplace) then
				if newName ~= false then
					cmds[i].NAME = newName
				end
				if newAlias ~= false then
					cmds[i].ALIAS = newAlias or {}
				end
				cmds[i].FUNC = newFunc
			end
		end
	end
end









local iypSettings = {
	example = "ex"
}

local iypDefaults = game:GetService("HttpService"):JSONEncode(iypSettings)
local iypNoSaves = false
local loadedEventData = nil
local iypFolderPath = "Infinite Yield Plus"
local iypSaveFileName = "Settings.JSON"
loadSaves = function()
	local iypJson = (iypFolderPath .. "/" .. iypSaveFileName)
	if writefileExploit() then
		if pcall(function() readfile(iypJson) end) then
			if readfile(iypJson) ~= nil then
				local success, response = pcall(function()
					local json = game:GetService("HttpService"):JSONDecode(readfile(iypJson))
					if json.example ~= nil then iypSettings.example = json.example else iypSettings.example = "ex" end
				end)
				if not success then
					warn("Save Json Error:", response)
					warn("Overwriting Save File")
					writefileCooldown(iypJson, iypDefaults)
					wait()
					loadSaves()
				end
			else
				writefileCooldown(iypJson, iypDefaults)
				wait()
				loadSaves()
			end
		else
			writefileCooldown(iypJson, iypDefaults)
			wait()
			if pcall(function() readfile(iypJson) end) then
				loadSaves()
			else
				nosaves = true
				iypSettings.example = "ex"

				local FileError = Instance.new("Frame")
				local background = Instance.new("Frame")
				local Directions = Instance.new("TextLabel")
				local shadow = Instance.new("Frame")
				local PopupText = Instance.new("TextLabel")
				local Exit = Instance.new("TextButton")
				local ExitImage = Instance.new("ImageLabel")

				FileError.Name = randomString()
				FileError.Parent = PARENT
				FileError.Active = true
				FileError.BackgroundTransparency = 1
				FileError.Position = UDim2.new(0.5, -180, 0, 290)
				FileError.Size = UDim2.new(0, 360, 0, 20)
				FileError.ZIndex = 10

				background.Name = "background"
				background.Parent = FileError
				background.Active = true
				background.BackgroundColor3 = Color3.fromRGB(36, 36, 37)
				background.BorderSizePixel = 0
				background.Position = UDim2.new(0, 0, 0, 20)
				background.Size = UDim2.new(0, 360, 0, 205)
				background.ZIndex = 10

				Directions.Name = "Directions"
				Directions.Parent = background
				Directions.BackgroundTransparency = 1
				Directions.BorderSizePixel = 0
				Directions.Position = UDim2.new(0, 10, 0, 10)
				Directions.Size = UDim2.new(0, 340, 0, 185)
				Directions.Font = Enum.Font.SourceSans
				Directions.TextSize = 14
				Directions.Text = "There was a problem writing a save file to your PC.\n\nPlease contact the developer/support team for your exploit and tell them writefile is not working.\n\nYour settings, keybinds, waypoints, and aliases will not save if you continue.\n\nThings to try:\n> Make sure a 'workspace' folder is located in the same folder as your exploit\n> If your exploit is inside of a zip/rar file, extract it.\n> Rejoin the game and try again or restart your PC and try again."
				Directions.TextColor3 = Color3.new(1, 1, 1)
				Directions.TextWrapped = true
				Directions.TextXAlignment = Enum.TextXAlignment.Left
				Directions.TextYAlignment = Enum.TextYAlignment.Top
				Directions.ZIndex = 10

				shadow.Name = "shadow"
				shadow.Parent = FileError
				shadow.BackgroundColor3 = Color3.fromRGB(46, 46, 47)
				shadow.BorderSizePixel = 0
				shadow.Size = UDim2.new(0, 360, 0, 20)
				shadow.ZIndex = 10

				PopupText.Name = "PopupText"
				PopupText.Parent = shadow
				PopupText.BackgroundTransparency = 1
				PopupText.Size = UDim2.new(1, 0, 0.95, 0)
				PopupText.ZIndex = 10
				PopupText.Font = Enum.Font.SourceSans
				PopupText.TextSize = 14
				PopupText.Text = "File Error"
				PopupText.TextColor3 = Color3.new(1, 1, 1)
				PopupText.TextWrapped = true

				Exit.Name = "Exit"
				Exit.Parent = shadow
				Exit.BackgroundTransparency = 1
				Exit.Position = UDim2.new(1, -20, 0, 0)
				Exit.Size = UDim2.new(0, 20, 0, 20)
				Exit.Text = ""
				Exit.ZIndex = 10

				ExitImage.Parent = Exit
				ExitImage.BackgroundColor3 = Color3.new(1, 1, 1)
				ExitImage.BackgroundTransparency = 1
				ExitImage.Position = UDim2.new(0, 5, 0, 5)
				ExitImage.Size = UDim2.new(0, 10, 0, 10)
				ExitImage.Image = "rbxassetid://5054663650"
				ExitImage.ZIndex = 10

				Exit.MouseButton1Click:Connect(function()
					FileError:Destroy()
				end)
			end
		end
	else
		iypSettings.example = "ex"
	end
end

loadSaves()

local updatePlusSettings = function()
	if iypNoSaves == false and writefileExploit() then
		local update = {
			example = iypSettings.example;
		}
		writefileCooldown(iypJson, game:GetService("HttpService"):JSONEncode(update))
	end
end
